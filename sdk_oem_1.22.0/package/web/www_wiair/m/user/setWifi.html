<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="format-detection" content="telephone=no">
        <meta name="Keywords" content="">
        <meta name="Description" content="">
        <meta http-equiv="Pragma" contect="no-cache">
        <meta http-equiv="cache-control" content="no-cache">
        <meta http-equiv="expires" content="0">
        <title>爱路由设置</title>
        <link rel="stylesheet" href="../../css/base.css">
        <link rel="stylesheet" href="../../css/m_router.css">
        <script type="text/javascript" src="../../js/jquery.js"></script>
        <script type="text/javascript" src="../../js/jquery.cookie.js"></script> 
        <script type="text/javascript" src="../../js/layer.m/layer.m.js"></script>
        <script type="text/javascript" src="../../js/m_router.js"></script>
        <script type="text/javascript" src="../../js/common.js"></script>
        <script>
            if ($.cookie('lstatus') != 'true') {
                $.cookie('lstatus', false, {path: '/'});
                document.location = 'http://' + document.domain + "/index.html?tt=" + new Date().getTime();
            }
        </script>        
    </head>

    <body>
        <style>
            .layermbtn span:first-child{ background-color:#056b9c;}
        </style>
        <div class="wrap">
            <div class="top"><a href="index.html" class="goback"><i></i></a>无线设置</div>	
            <div class="sub">
                <div class="nav" style="border:none;">
                    <span class="navsp">WIFI开关</span>
                    <span class="navsp"><label for="r1">开启</label><input class="navsp_rad" type="radio" id="r1" name="onOff" value="1"></span>
                    <span class="navsp"><label for="r2">关闭</label><input class="navsp_rad" type="radio" id="r2" name="onOff" value="0"></span>
                </div>
                <div class="sub-box" id="wifiOnOff">           
                    <p>温馨提示：进行无线密码更改期间，会短暂断网。 设置成功后，手机需要重新连接无线网络。</p>
                    <ul class="list">
                        <li>
                            <span class="sp-l">无线名称</span>
                            <span class="sp-r">
                                <input type="text" name="wifi_acc" class="inpt" id="wifi_name" autocomplete="off" value="">
                            </span>
                        </li>
                        <li>
                            <span class="sp-l">无线密码</span>
                            <span class="sp-r">
                                <label for="wifi_pwd">请输入无线密码</label>
                                <input type="password" name="wifi_pwd" class="inpt" id="wifi_password" autocomplete="off">
                            </span>
                        </li>
                        <li>
                            <span class="sp-l">无线信道</span>
                            <span class="sp-r">
                                <select id="wifiChannel" name="wifiChannel" class="wifiSel">
                                    <option value="0">自动</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                </select>
                            </span>
                        </li>
                        <li>
                            <span class="sp-l">信道频宽</span>
                            <span class="sp-r">
                                <select id="wifiBandwidth" name="wifiBandwidth" class="wifiSel">
                                    <option value="0">20MHz</option>
                                    <option value="1">20/40MHz</option>
                                </select>
                            </span>
                        </li>
                        <li class="change"><input class="chks" type="checkbox" id="hidden_ssid">隐藏无线名称</li>
                    </ul>
                    <input type="hidden" id="channel">
                    <div class="btn-box"><input type="button" class="btn" id="wifi_btn" value="确 认"></div>
                </div>

            </div>

        </div>

    </body>
</html>
<script>
    wifiGet();
    $(function() {
        $("#wifi_btn").on('click', function() {
            var ssid = $("#wifi_name").val();
            var pwd = $("#wifi_password").val();
            var channel = $("#wifiChannel").val();
            var wifiBandwidth = $("#wifiBandwidth").val();
            var hidden_ssid = 0;
            if ($("#hidden_ssid").attr('checked')) {
                hidden_ssid = 1;
            }
            if (ssid == '' || ssid == null) {
                tips('请输入无线名称！');
                return;
            }
            if (getStrLength(ssid) > 31 || /[\':;*?~`!@#$%^&+={}\[\]\<\\(\),\.\。\，]/.test(ssid)) {
                tips('无线名称不能超过31位字符或者包含特殊字符！');
                return;
            }
            if (pwd.length > 0) {
                if (pwd.length > 16 || pwd.length < 8) {
                    tips('密码长度不能超过16位或不能少于8位');
                    return;
                }
            }

            if (escape(pwd).indexOf("%u") != -1) {
                getMobileMsg('密码不能包含中文字符！', 1, "#wifi_pwd");
                return;
            }

            if (/[\'\"{}\[\]]/.test(pwd)) {
                getMobileMsg('密码不能包含特殊字符(&、#...)！', 1, "#wifi_pwd");
                return;
            }
            pwd = encodeURIComponent(pwd);
            setWifiAp(ssid, pwd, channel, hidden_ssid, wifiBandwidth);
        });
    });
</script>


